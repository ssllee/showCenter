!function(t){t.fn.flowplugin=function(e){e=t.extend({jsonDate:[],imgSrcStart:"img/f1.png",imgSrcOther:"img/f2.png",imgWidth:"20px",imgHeight:"20px",imgClass:void 0},e);var l='<div class="flowSwrap"><div class="flow-line"></div></div>',a='<div id="CELL_ID" class="flowCell"><div class="cell-left"></div><div class="cell-center"></div><div class="cell-right"></div></div>';function i(i){if(null!=e.jsonDate&&null!=e.jsonDate.data&&0!=e.jsonDate.data.length){var s=e.jsonDate.data,c=s.length;i.append(l),t.each(s,function(l,i){var s=void 0==i.createDate||null==i.createDate?"":i.createDate.split(/\s/)[0],r=void 0==i.createDate||null==i.createDate?"":i.createDate.split(/\s/)[1],n=i.jobName,g=void 0==i.jobOther||null==i.jobOther?"":i.jobOther.split(/,/),d="cell_"+l,o=a.replace("CELL_ID",d);t(".flowSwrap").append(o);var p='<p class="t1">'+r+'</p><p class="t2">'+s+"</p>",m=t("#"+d+" .cell-left");m.append(p),0==l?e.imgClass?cellCenterHtml='<img id="startImg" src="'+e.imgSrcStart+'" class="'+e.imgClass+'" />':cellCenterHtml='<img id="startImg" src="'+e.imgSrcStart+'" width="'+e.imgWidth+'" height="'+e.imgHeight+'" />':cellCenterHtml=l+1==c?'<img id="endImg" src="'+e.imgSrcOther+'" class="'+e.imgClass+'" />':'<img src="'+e.imgSrcOther+'" class="'+e.imgClass+'" />',t("#"+d+" .cell-center").append(cellCenterHtml);var h=0==l?'<p class="t1_start">'+n+"</p>":'<p class="t1">'+n+"</p>",f=t("#"+d+" .cell-right");f.append(h),t.each(g,function(t,e){var l='<p class="t2">'+e+"</p>";f.append(l)}),0==l?m.addClass("fc-orange"):m.addClass("fc-grey"),0==l?f.addClass("fc-orange"):f.addClass("fc-grey")}),c>1&&function(){var e=t("#startImg").position().left,l=t("#startImg").position().top,a=t("#startImg").width(),i=t("#startImg").height(),s=t("#endImg").position().left,c=t("#endImg").position().top,r=t(".flow-line").width();console.log(e,l,s,c,a);var n=e+a/2-r/2,g=l+i/2,d=c-l-i/2;t(".flow-line").css({left:n,top:g,height:d})}()}}return t.each(this,function(){i(t(this))})}}(jQuery);